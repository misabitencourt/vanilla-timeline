"use strict";!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=5)}([function(module,exports,__webpack_require__){exports.a=function(params){function killEl(el){el.parentElement&&el.parentElement.removeChild(el)}params.data.booking.forEach(function(booking){var date=new Date(booking.start),outDate=new Date(booking.end),timeDiff=outDate.getTime()-date.getTime(),dayDiff=parseInt(timeDiff/864e5),startSelector='[data-subject-item="'+booking.subject+'"][data-date-item="'+date.getTime()+'"]',endSelector='[data-subject-item="'+booking.subject+'"][data-date-item="'+outDate.getTime()+'"]',tdStart=params.el.querySelector(startSelector),tdEnd=params.el.querySelector(endSelector);if(!tdStart||!tdEnd)return console.warning("I cant render the booking:",booking);for(tdStart.colSpan=dayDiff+1,tdStart.style.backgroundColor="#DDD",tdStart.textContent=booking.name;date.getTime()<outDate.getTime();){date.setTime(date.getTime()+864e5);var selector='[data-subject-item="'+booking.subject+'"][data-date-item="'+date.getTime()+'"]',td=params.bookingDiv.querySelector(selector);td&&killEl(td)}})}},function(module,exports,__webpack_require__){exports.a={monthNames:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}},function(module,exports,__webpack_require__){function getMonthName(nr){return window.$timelineTableConfig.monthNames[1*nr]}function getArrDateInterval(interval){var intervalArr=[interval.start],cursor=new Date(interval.start+"");do{cursor.setTime(cursor.getTime()+oneDay),intervalArr.push(new Date(cursor+""))}while(cursor.getTime()<interval.end.getTime());return intervalArr.push(interval.end),intervalArr}function getThDateInterval(interval){return getArrDateInterval(interval).map(function(date){var year=(date.getFullYear()+"").substr(2,4),month=getMonthName(date.getMonth());return'\n            <th>\n                <small class="timeline-table-date-year">\n                    '+year+'\n                </small>\n                <span class="timeline-table-date-day">\n                    '+date.getDate()+'\n                </span>\n                <span class="timeline-table-date-month">\n                    '+month+"\n                </span>\n            </th>\n        "}).join("")}function createMonthsTable(params){var dateInterval=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__filters__.a)(params.data),tbl=document.createElement("table");tbl.border=0,tbl.className=params.tableClass||"timeline-table",tbl.innerHTML="<thead></thead>",tbl.getElementsByTagName("thead")[0].innerHTML="\n        <tr>\n            "+getThDateInterval(dateInterval)+"\n        </tr>\n    ";var tbl2=document.createElement("table");tbl2.className=params.tableClass||"timeline-table",tbl2.innerHTML="<tbody></tbody>",params.contentTable=tbl2,tbl2.getElementsByTagName("tbody")[0].innerHTML=params.data.subjects.map(function(s,row){return"\n        <tr>\n            "+getArrDateInterval(dateInterval).map(function(d,column){return'\n                    <td data-subject-item="'+s.id+'" \n                        data-date-item="'+d.getTime()+'"\n                        data-column="'+column+'"\n                        data-row="'+row+'">\n                        <div style="width: 63px; height: 18px"></div>\n                    </td>\n                '}).join("")+"\n        </tr>\n    "}).join("");var div=document.createElement("div");div.style.width=window.innerWidth>800?"78%":"50%";var headerDiv=document.createElement("div");headerDiv.style.height="60px",headerDiv.style.width="100%",headerDiv.style.overflow="hidden",headerDiv.appendChild(tbl);var bookingDiv=document.createElement("div");return params.bookingDiv=bookingDiv,bookingDiv.style.height=params.sizes.divX-60+"px",bookingDiv.style.overflowX="auto",bookingDiv.appendChild(tbl2),bookingDiv.addEventListener("scroll",function(e){tbl.style.marginLeft="-"+e.target.scrollLeft+"px",params.el.querySelector("[data-subjects-table]").style.marginTop="-"+e.target.scrollTop+"px"}),div.appendChild(headerDiv),div.appendChild(bookingDiv),div}function createSubjectsTable(params){var div=document.createElement("div");div.style.width=window.innerWidth>800?"20%":"38%";var tbl=document.createElement("table");tbl.border=0,tbl.dataset.subjectsTable="1",tbl.className=params.tableClass||"timeline-table-subjects";var tbody=document.createElement("tbody");return tbl.appendChild(tbody),tbody.innerHTML=params.data.subjects.map(function(s){return'\n        <tr>\n            <th data-subject="'+s.id+'" title="'+s.description+'">\n                '+s.name+"\n            </th>\n        </tr>\n    "}).join(""),div.style.height=params.sizes.divX-60+"px",div.style.overflowY="hidden",div.appendChild(tbl),div}function createTable(params){var generalMarginY=window.innerHeight>520?200:.13*window.innerHeight,divX=window.innerHeight-generalMarginY,wrp=params.el;wrp.style.width="100%",wrp.style.height=divX+"px",params.sizes={divX:divX};var subjectsTbl=createSubjectsTable(params),monthsTbl=createMonthsTable(params);subjectsTbl.style.float=monthsTbl.style.float="left";var clearFix=document.createElement("br");clearFix.style.clear="both",wrp.style.overflowX="hidden",wrp.appendChild(subjectsTbl),wrp.appendChild(monthsTbl),wrp.appendChild(clearFix),subjectsTbl.style.marginTop="60px",subjectsTbl.innerHTML=subjectsTbl.innerHTML}var __WEBPACK_IMPORTED_MODULE_0__filters__=__webpack_require__(4);exports.a=createTable;var oneDay=864e5},function(module,exports,__webpack_require__){function findDuplicate(list,item){return!!list.find(function(i){return i!==item&&i.id===item.id})}function validateWithIdAndName(listName,list,errors){list&&list.length?list.forEach(function(categ){categ.id||errors.push(listName+" has item without id!!"),categ.name||errors.push(listName+" has item without name!!"),findDuplicate(list,categ)&&errors.push(listName+" has item with duplicate id")}):errors.push("No "+listName+" defined")}function isValidIsoDate(date){return!!date&&("string"==typeof date&&(3===date.split("-").length&&""+new Date(date)!="Invalid Date"))}exports.a=function(data){var errors=[];return validateWithIdAndName("categories",data.subjectCategs,errors),data.subjects&&data.subjects.length?data.subjects.forEach(function(sbj){sbj.id||errors.push("Subject without id!!"),sbj.name||errors.push("Subject without name!!"),sbj.category||errors.push("Subject without category!!"),findDuplicate(data.subjects,sbj)&&errors.push("subject with duplicate id")}):errors.push("No subjects defined"),validateWithIdAndName("statuses",data.statuses,errors),data.booking&&data.booking.length?data.booking.forEach(function(booking){if(booking.id||errors.push("Booking without id!!"),booking.name||errors.push("Booking without name!!"),booking.start||errors.push("Booking without start date!!"),booking.end||errors.push("Booking without end date!!"),isValidIsoDate(booking.start)||errors.push("Booking with invalid start date!!"),isValidIsoDate(booking.end)||errors.push("Booking with invalid end date!!"),booking.subject){(data.subjects||[]).find(function(s){return s.id===booking.subject})||errors.push("Booking subject "+booking.subject+" isnt exists!!")}else errors.push("Booking without subject!!")}):errors.push("No booking!!"),errors}},function(module,exports,__webpack_require__){function getEarlyDate(data){var selected=null;return data.booking.forEach(function(b){var date=new Date(b.start);(!selected||date.getTime()<selected.getTime())&&(selected=date)}),selected}function getLatestDate(data){var selected=null;return data.booking.forEach(function(b){var date=new Date(b.end);(!selected||date.getTime()>selected.getTime())&&(selected=date)}),selected}function getDateInterval(data){return{start:getEarlyDate(data),end:getLatestDate(data)}}exports.a=getDateInterval},function(module,exports,__webpack_require__){var __WEBPACK_IMPORTED_MODULE_0__validation__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_1__layout__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_2__defaults__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_3__booking__=__webpack_require__(0);window.$timelineTableConfig=window.$timelineTableConfig||__WEBPACK_IMPORTED_MODULE_2__defaults__.a,window.createBookingMap=function(params){function refresh(){params.el.innerHTML="",createBookingMap(params)}var errors=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__validation__.a)(params.data);if(errors.length)return errors.forEach(function(e){return console.error(e)});__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__layout__.a)(params),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__booking__.a)(params),window.addEventListener("resize",function(){window.resizeTimeout&&window.clearTimeout(window.resizeTimeout),window.resizeTimeout=window.setTimeout(refresh,500)})}}]);